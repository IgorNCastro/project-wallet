(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{23:function(e,t,a){},34:function(e,t,a){e.exports=a(49)},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),l=a.n(i),c=a(24),s=a(13),o=(a(23),a(16)),u=a(8),d=a(9),p=a(3),m=a(11),h=a(10),E=a(2),b=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onButtonClick=n.onButtonClick.bind(Object(p.a)(n)),n}return Object(d.a)(a,[{key:"onButtonClick",value:function(e){e.preventDefault();var t=this.props,a=t.history;(0,t.DispUpdateEmail)(t.emailInput),a.push("/carteira")}},{key:"render",value:function(){var e=this.props,t=e.emailInput,a=e.passwordInput,n=e.isLoginDisabled,i=e.onInputChange;return r.a.createElement("div",{className:"login-section"},r.a.createElement("section",{className:"login-input"},r.a.createElement("h2",null,"Welcome to Wallet"),r.a.createElement("input",{"data-testid":"email-input",type:"email",name:"emailInput",placeholder:"Email",value:t,onChange:i,className:"input-login-box"}),r.a.createElement("input",{"data-testid":"password-input",type:"password",name:"passwordInput",placeholder:"Password",value:a,onChange:i,className:"input-login-box"}),r.a.createElement("button",{type:"submit",name:"button",disabled:n,onClick:this.onButtonClick,className:"login-button"},"Entrar")))}}]),a}(r.a.Component),v=a(14),f=a.n(v),g=a(18),j=a(5),y=a(20),C=function(e,t){return{type:"FORM_ACTION",payload:Object(j.a)(Object(j.a)({},e),{},{exchangeRates:t})}},O=function(e){return{type:"DELETE_ACTION",payload:e}};function k(){return function(e){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(t){return e((a=Object.keys(t).filter((function(e){return!e.includes("USDT")})),{type:"WALLET_ACTION",payload:Object(y.a)(a)}));var a}))}}function x(e){return function(){var t=Object(g.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,a(C(e,r)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}var N=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onFormChange=n.onFormChange.bind(Object(p.a)(n)),n.onFormButtonClick=n.onFormButtonClick.bind(Object(p.a)(n)),n.state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},n}return Object(d.a)(a,[{key:"onFormChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(o.a)({},a,n))}},{key:"onFormButtonClick",value:function(){var e=Object(g.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props.dispatch,e.next=4,a(x(this.state));case 4:this.setState((function(e){return{id:e.id+1,value:"",description:"",currency:"USD",method:"",tag:""}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.coinsListed,n=t.isEditing,i=t.endEditClick,l=this.state,c=l.value,s=l.description;return r.a.createElement("form",{className:"form-field"},r.a.createElement("div",null,r.a.createElement("label",{className:"",htmlFor:"value"}," Valor "),r.a.createElement("input",{className:"user-value-input",id:"value",type:"number","data-testid":"value-input",name:"value",value:c,onChange:this.onFormChange})),r.a.createElement("label",{htmlFor:"currency",className:""}," Moedas "),r.a.createElement("select",{className:"user-input",id:"currency","data-testid":"currency-input",name:"currency",onChange:this.onFormChange},a.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("label",{htmlFor:"method",className:""}," M\xe9todo de pagamento "),r.a.createElement("select",{className:"user-input",id:"method","data-testid":"method-input",name:"method",onChange:this.onFormChange},["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"].map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("label",{htmlFor:"tag",className:""}," Categoria "),r.a.createElement("select",{className:"user-input",id:"tag","data-testid":"tag-input",name:"tag",onChange:this.onFormChange},["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"].map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("div",{className:""},r.a.createElement("label",{className:"",htmlFor:"description"}," Descri\xe7\xe3o "),r.a.createElement("input",{className:"user-desc-input",id:"description",type:"text","data-testid":"description-input",name:"description",value:s,onChange:this.onFormChange})),n?r.a.createElement("button",{type:"submit",name:"button",onClick:function(t){return i(t,e.state)},className:"add-edit-button"},"Editar despesa"):r.a.createElement("button",{type:"submit",name:"button",onClick:this.onFormButtonClick,className:"add-edit-button"},"Adicionar despesa"))}}]),a}(r.a.Component),w=Object(s.b)((function(e){return{coinsListed:e.wallet.currencies,prevExpenses:e.wallet.expenses}}))(N),I=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).adjustCurrencyName=function(e){return e.split("/")[0]},e.adjustValue=function(e){return parseFloat(e).toFixed(2)},e.adjustCurrency=function(e){return(Math.round(100*e)/100).toFixed(2)},e.adjustExpenseTotal=function(e,t){return Math.round(e*t*100)/100},e.onDeleteButtonClick=function(){var t=Object(g.a)(f.a.mark((function t(a){var n,r,i,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.props,r=n.prevExpenses,i=n.disUpdateExpensesAfterDelete,l=r.filter((function(e){return e.id!==Number(a.target.name)})),t.next=5,i(l);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.prevExpenses,n=t.onEditButtonClick,i=t.isEditing;return r.a.createElement("section",{className:""},r.a.createElement("table",{className:"table-wallet"},r.a.createElement("thead",{className:""},r.a.createElement("tr",{className:"table-row"},r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t.id,className:"table-row"},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,e.adjustValue(t.value)),r.a.createElement("td",null,e.adjustCurrencyName(t.exchangeRates[t.currency].name)),r.a.createElement("td",null,e.adjustCurrency(t.exchangeRates[t.currency].ask)),r.a.createElement("td",null,e.adjustExpenseTotal(t.value,t.exchangeRates[t.currency].ask)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,i?r.a.createElement("span",null):r.a.createElement("button",{"data-testid":"edit-btn",type:"submit",name:t.id,onClick:n,className:"button-edit"},"Editar despesa"),r.a.createElement("button",{"data-testid":"delete-btn",type:"submit",name:t.id,onClick:e.onDeleteButtonClick,className:"button-delete"},"Excluir")))})))))}}]),a}(r.a.Component),D=Object(s.b)((function(e){return{prevExpenses:e.wallet.expenses}}),(function(e){return{disUpdateExpensesAfterDelete:function(t){return e(O(t))}}}))(I),F=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).updateTotalField=n.updateTotalField.bind(Object(p.a)(n)),n.onEditButtonClick=n.onEditButtonClick.bind(Object(p.a)(n)),n.endEditClick=n.endEditClick.bind(Object(p.a)(n)),n.state={atualCurrency:"BRL",isEditing:!1,whoIsEditing:null,timesUpdated:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.disFetchCoins)()}},{key:"onEditButtonClick",value:function(e){e.preventDefault();var t=e.target.name;this.setState({isEditing:!0,whoIsEditing:Number(t),timesUpdated:!1})}},{key:"endEditClick",value:function(e,t){e.preventDefault();var a=this.props,n=a.prevExpenses,r=a.disUpdateExpensesAfterDelete,i=this.state.whoIsEditing;n[i].value=t.value,n[i].currency=t.currency,n[i].method=t.method,n[i].tag=t.tag,n[i].description=t.description,this.setState({isEditing:!1,whoIsEditing:null,timesUpdated:!0}),r(n)}},{key:"updateTotalField",value:function(){var e=this.props.prevExpenses.reduce((function(e,t){return e+t.value*t.exchangeRates[t.currency].ask}),0);return Math.floor(100*e)/100}},{key:"render",value:function(){var e=this.props.emailUser,t=this.state,a=t.atualCurrency,n=t.isEditing,i=t.whoIsEditing,l=t.timesUpdated;return r.a.createElement("main",null,r.a.createElement("header",{className:"header-class"},r.a.createElement("h1",null,"WALLET"),r.a.createElement("h3",{"data-testid":"email-field"},e),r.a.createElement("div",{className:"header-value"},r.a.createElement("h3",{"data-testid":"header-currency-field"},a,":"),r.a.createElement("h3",{"data-testid":"total-field"},this.updateTotalField()))),r.a.createElement(w,{isEditing:n,whoIsEditing:i,endEditClick:this.endEditClick}),r.a.createElement(D,{isEditing:n,timesUpdated:l,onEditButtonClick:this.onEditButtonClick}))}}]),a}(r.a.Component),T=Object(s.b)((function(e){return{emailUser:e.user.email,prevExpenses:e.wallet.expenses}}),(function(e){return{disUpdateExpensesAfterDelete:function(t){return e(O(t))},disFetchCoins:function(){return e(k())}}}))(F),U=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"404 - NOT FOUND")}}]),a}(r.a.Component),A=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onInputChange=n.onInputChange.bind(Object(p.a)(n)),n.validateEmail=n.validateEmail.bind(Object(p.a)(n)),n.loginReady=n.loginReady.bind(Object(p.a)(n)),n.state={emailInput:"",passwordInput:"",isLoginDisabled:!0},n}return Object(d.a)(a,[{key:"onInputChange",value:function(e){var t,a=this,n=e.target,r=n.name,i=n.value;this.setState((t={},Object(o.a)(t,r,i),Object(o.a)(t,"isLoginDisabled",!0),t),(function(){a.loginReady()}))}},{key:"validateEmail",value:function(e){return/^[^\s@]+@[^\s@]+\.com/.test(e)}},{key:"loginReady",value:function(){var e=this.state,t=e.emailInput,a=e.passwordInput;this.validateEmail(t)&&a.length>=6&&this.setState({isLoginDisabled:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.emailInput,n=t.passwordInput,i=t.isLoginDisabled,l=this.props.DispUpdateEmail;return r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(b,Object.assign({},t,{emailInput:a,passwordInput:n,isLoginDisabled:i,onInputChange:e.onInputChange,DispUpdateEmail:l}))}}),r.a.createElement(E.a,{exact:!0,path:"/carteira",component:T}),r.a.createElement(E.a,{path:"*",component:U}))}}]),a}(r.a.Component),B=Object(s.b)(null,(function(e){return{DispUpdateEmail:function(t){return e(function(e){return{type:"USER_ACTION",email:e}}(t))}}}))(A),L=a(15),R=a(32),S=a(33),M={email:""},_={currencies:[],expenses:[]},W=Object(L.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ACTION":return Object(j.a)(Object(j.a)({},e),{},{email:t.email});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WALLET_ACTION":return Object(j.a)(Object(j.a)({},e),{},{currencies:Object(y.a)(t.payload)});case"FORM_ACTION":return Object(j.a)(Object(j.a)({},e),{},{expenses:[].concat(Object(y.a)(e.expenses),[t.payload])});case"DELETE_ACTION":return Object(j.a)(Object(j.a)({},e),{},{expenses:t.payload});default:return e}}}),V=Object(L.createStore)(W,Object(R.composeWithDevTools)(Object(L.applyMiddleware)(S.a)));l.a.render(r.a.createElement(c.a,{basename:"/project-wallet"},r.a.createElement(s.a,{store:V},r.a.createElement(B,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.1b646f0a.chunk.js.map