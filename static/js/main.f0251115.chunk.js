(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(49)},42:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),l=n.n(i),c=n(23),o=n(13),u=(n(42),n(16)),s=n(8),d=n(9),p=n(3),m=n(11),h=n(10),E=n(2),b=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onButtonClick=a.onButtonClick.bind(Object(p.a)(a)),a}return Object(d.a)(n,[{key:"onButtonClick",value:function(e){e.preventDefault();var t=this.props,n=t.history;(0,t.DispUpdateEmail)(t.emailInput),n.push("/carteira")}},{key:"render",value:function(){var e=this.props,t=e.emailInput,n=e.passwordInput,a=e.isLoginDisabled,i=e.onInputChange;return r.a.createElement("section",null,r.a.createElement("input",{"data-testid":"email-input",type:"email",name:"emailInput",placeholder:"Email",value:t,onChange:i}),r.a.createElement("input",{"data-testid":"password-input",type:"password",name:"passwordInput",placeholder:"Password",value:n,onChange:i}),r.a.createElement("button",{type:"submit",name:"button",disabled:a,onClick:this.onButtonClick},"Entrar"))}}]),n}(r.a.Component),f=n(14),v=n.n(f),y=n(18),j=n(5),g=n(20),C=function(e,t){return{type:"FORM_ACTION",payload:Object(j.a)(Object(j.a)({},e),{},{exchangeRates:t})}},O=function(e){return{type:"DELETE_ACTION",payload:e}};function k(){return function(e){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(t){return e((n=Object.keys(t).filter((function(e){return!e.includes("USDT")})),{type:"WALLET_ACTION",payload:Object(g.a)(n)}));var n}))}}function x(e){return function(){var t=Object(y.a)(v.a.mark((function t(n){var a,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,n(C(e,r)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}var w=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onFormChange=a.onFormChange.bind(Object(p.a)(a)),a.onFormButtonClick=a.onFormButtonClick.bind(Object(p.a)(a)),a.state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},a}return Object(d.a)(n,[{key:"onFormChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(u.a)({},n,a))}},{key:"onFormButtonClick",value:function(){var e=Object(y.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.props.dispatch,e.next=4,n(x(this.state));case 4:this.setState((function(e){return{id:e.id+1,value:"",description:"",currency:"USD",method:"",tag:""}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.coinsListed,a=t.isEditing,i=t.endEditClick,l=this.state,c=l.value,o=l.description;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"value"},"Valor:",r.a.createElement("input",{id:"value","data-testid":"value-input",type:"number",name:"value",value:c,onChange:this.onFormChange})),r.a.createElement("label",{htmlFor:"currency"},"Moeda",r.a.createElement("select",{id:"currency","data-testid":"currency-input",name:"currency",onChange:this.onFormChange},n.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de pagamento:",r.a.createElement("select",{id:"method","data-testid":"method-input",name:"method",onChange:this.onFormChange},["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"].map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"tag"},"Categoria:",r.a.createElement("select",{id:"tag","data-testid":"tag-input",name:"tag",onChange:this.onFormChange},["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"].map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o:",r.a.createElement("input",{id:"description","data-testid":"description-input",type:"text",name:"description",value:o,onChange:this.onFormChange})),a?r.a.createElement("button",{type:"submit",name:"button",onClick:function(t){return i(t,e.state)}},"Editar despesa"):r.a.createElement("button",{type:"submit",name:"button",onClick:this.onFormButtonClick},"Adicionar despesa"))}}]),n}(r.a.Component),I=Object(o.b)((function(e){return{coinsListed:e.wallet.currencies,prevExpenses:e.wallet.expenses}}))(w),D=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).adjustCurrencyName=function(e){return e.split("/")[0]},e.adjustValue=function(e){return parseFloat(e).toFixed(2)},e.adjustCurrency=function(e){return(Math.round(100*e)/100).toFixed(2)},e.adjustExpenseTotal=function(e,t){return Math.round(e*t*100)/100},e.onDeleteButtonClick=function(){var t=Object(y.a)(v.a.mark((function t(n){var a,r,i,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.props,r=a.prevExpenses,i=a.disUpdateExpensesAfterDelete,l=r.filter((function(e){return e.id!==Number(n.target.name)})),t.next=5,i(l);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.prevExpenses,a=t.onEditButtonClick,i=t.isEditing;return r.a.createElement("section",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,n.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,e.adjustValue(t.value)),r.a.createElement("td",null,e.adjustCurrencyName(t.exchangeRates[t.currency].name)),r.a.createElement("td",null,e.adjustCurrency(t.exchangeRates[t.currency].ask)),r.a.createElement("td",null,e.adjustExpenseTotal(t.value,t.exchangeRates[t.currency].ask)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,i?r.a.createElement("span",null):r.a.createElement("button",{"data-testid":"edit-btn",type:"submit",name:t.id,onClick:a},"Editar despesa"),r.a.createElement("button",{"data-testid":"delete-btn",type:"submit",name:t.id,onClick:e.onDeleteButtonClick},"Excluir")))})))))}}]),n}(r.a.Component),F=Object(o.b)((function(e){return{prevExpenses:e.wallet.expenses}}),(function(e){return{disUpdateExpensesAfterDelete:function(t){return e(O(t))}}}))(D),T=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).updateTotalField=a.updateTotalField.bind(Object(p.a)(a)),a.onEditButtonClick=a.onEditButtonClick.bind(Object(p.a)(a)),a.endEditClick=a.endEditClick.bind(Object(p.a)(a)),a.state={atualCurrency:"BRL",isEditing:!1,whoIsEditing:null,timesUpdated:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.disFetchCoins)()}},{key:"onEditButtonClick",value:function(e){e.preventDefault();var t=e.target.name;this.setState({isEditing:!0,whoIsEditing:Number(t),timesUpdated:!1})}},{key:"endEditClick",value:function(e,t){e.preventDefault();var n=this.props,a=n.prevExpenses,r=n.disUpdateExpensesAfterDelete,i=this.state.whoIsEditing;a[i].value=t.value,a[i].currency=t.currency,a[i].method=t.method,a[i].tag=t.tag,a[i].description=t.description,this.setState({isEditing:!1,whoIsEditing:null,timesUpdated:!0}),r(a)}},{key:"updateTotalField",value:function(){var e=this.props.prevExpenses.reduce((function(e,t){return e+t.value*t.exchangeRates[t.currency].ask}),0);return Math.floor(100*e)/100}},{key:"render",value:function(){var e=this.props.emailUser,t=this.state,n=t.atualCurrency,a=t.isEditing,i=t.whoIsEditing,l=t.timesUpdated;return r.a.createElement("main",null,r.a.createElement("header",null,r.a.createElement("h2",null,"TrybeWallet"),r.a.createElement("h4",{"data-testid":"email-field"},e),r.a.createElement("h4",{"data-testid":"header-currency-field"},n),r.a.createElement("h4",{"data-testid":"total-field"},this.updateTotalField())),r.a.createElement(I,{isEditing:a,whoIsEditing:i,endEditClick:this.endEditClick}),r.a.createElement(F,{isEditing:a,timesUpdated:l,onEditButtonClick:this.onEditButtonClick}))}}]),n}(r.a.Component),U=Object(o.b)((function(e){return{emailUser:e.user.email,prevExpenses:e.wallet.expenses}}),(function(e){return{disUpdateExpensesAfterDelete:function(t){return e(O(t))},disFetchCoins:function(){return e(k())}}}))(T),A=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,"404 - NOT FOUND")}}]),n}(r.a.Component),B=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onInputChange=a.onInputChange.bind(Object(p.a)(a)),a.validateEmail=a.validateEmail.bind(Object(p.a)(a)),a.loginReady=a.loginReady.bind(Object(p.a)(a)),a.state={emailInput:"",passwordInput:"",isLoginDisabled:!0},a}return Object(d.a)(n,[{key:"onInputChange",value:function(e){var t,n=this,a=e.target,r=a.name,i=a.value;this.setState((t={},Object(u.a)(t,r,i),Object(u.a)(t,"isLoginDisabled",!0),t),(function(){n.loginReady()}))}},{key:"validateEmail",value:function(e){return/^[^\s@]+@[^\s@]+\.com/.test(e)}},{key:"loginReady",value:function(){var e=this.state,t=e.emailInput,n=e.passwordInput;this.validateEmail(t)&&n.length>=6&&this.setState({isLoginDisabled:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.emailInput,a=t.passwordInput,i=t.isLoginDisabled,l=this.props.DispUpdateEmail;return r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(b,Object.assign({},t,{emailInput:n,passwordInput:a,isLoginDisabled:i,onInputChange:e.onInputChange,DispUpdateEmail:l}))}}),r.a.createElement(E.a,{exact:!0,path:"/carteira",component:U}),r.a.createElement(E.a,{path:"*",component:A}))}}]),n}(r.a.Component),L=Object(o.b)(null,(function(e){return{DispUpdateEmail:function(t){return e(function(e){return{type:"USER_ACTION",email:e}}(t))}}}))(B),R=n(15),N=n(31),S=n(32),M={email:""},_={currencies:[],expenses:[]},V=Object(R.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ACTION":return Object(j.a)(Object(j.a)({},e),{},{email:t.email});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WALLET_ACTION":return Object(j.a)(Object(j.a)({},e),{},{currencies:Object(g.a)(t.payload)});case"FORM_ACTION":return Object(j.a)(Object(j.a)({},e),{},{expenses:[].concat(Object(g.a)(e.expenses),[t.payload])});case"DELETE_ACTION":return Object(j.a)(Object(j.a)({},e),{},{expenses:t.payload});default:return e}}}),W=Object(R.createStore)(V,Object(N.composeWithDevTools)(Object(R.applyMiddleware)(S.a)));l.a.render(r.a.createElement(c.a,{basename:"/project-wallet"},r.a.createElement(o.a,{store:W},r.a.createElement(L,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.f0251115.chunk.js.map